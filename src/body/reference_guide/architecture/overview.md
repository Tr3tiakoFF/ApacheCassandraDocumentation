# Оглядове ознайомлення

Apache Cassandra — це відкрита розподілена NoSQL база даних. Вона реалізує модель зберігання широких стовпців із розподілом партицій і семантикою остаточної консистентності.

## Мотивація та передісторія

Cassandra спочатку була розроблена у Facebook на основі архітектури подій з поетапною обробкою (SEDA). Ця початкова розробка поєднала методи розподіленого зберігання та реплікації Amazon Dynamo з моделлю даних та сховища Google Bigtable. Dynamo та Bigtable були створені для задоволення нових вимог до масштабованих, надійних та завжди доступних систем зберігання, але мали деякі аспекти, які могли бути покращені.

Apache Cassandra була розроблена як поєднання найкращих можливостей обох систем для задоволення нових вимог до масштабного зберігання даних та обсягу запитів. Зі зростанням потреби у повній глобальній реплікації та постійно доступних запитах із низькою затримкою, стала необхідною нова модель бази даних. Реляційні системи баз даних того часу не могли відповідати таким вимогам.

Apache Cassandra була створена для вирішення цих викликів з такими основними завданнями:
- Повна мульти-приймальна реплікація бази даних: Підхід до реплікації даних у розподілених базах даних, коли кожен вузол у кластері може виступати як "первинний" для своїх даних
- Глобальна доступність із низькою затримкою
- Масштабування на базовому апаратному забезпеченні
- Лінійне збільшення пропускної здатності з кожним додатковим процесором
- Онлайн балансування навантаження та ріст кластера
- Партиційні запити за ключем
- Гнучка схема

## Функціональні можливості

Cassandra надає мову запитів CQL ([Cassandra Query Language](/body/reference_guide/cql.md)), подібну до SQL, для створення, зміни, видалення схем бази даних і доступу до даних. CQL дозволяє користувачам організовувати дані в кластері вузлів Cassandra з використанням:

- Простір ключів: Визначає спосіб реплікації набору даних для кожного центру обробки даних. Реплікація — це кількість копій, збережених у кластері. Простори ключів містять таблиці.
- Таблиця: Складається з рядків та стовпців. Стовпці визначають типізовану схему для одного елемента в таблиці. Таблиці розподіляються на основі стовпців, які входять до ключа партиції. Таблиці Cassandra дозволяють додавати нові стовпці без простоїв.
- Партиція: Визначає обов’язкову частину первинного ключа для всіх рядків у Cassandra, що потрібна для визначення вузла в кластері, де зберігається рядок. Усі ефективні запити містять ключ партиції.
- Рядок: Містить набір стовпців, що визначаються унікальним первинним ключем, що складається з ключа партиції та за необхідності додаткових кластерних ключів.
- Стовпець: Окремий елемент даних із певним типом, який належить до рядка.

CQL підтримує численні розширені функції над партиційованим набором даних, такі як:
- Типи колекцій, включаючи множини, карти та списки
- Визначені користувачем типи, кортежі, функції та агрегати
- Індексація, прив'язана до сховища (SAI) для вторинних індексів
- Локальні вторинні індекси (2i)
- Однопартиційні легкі транзакції з атомарною семантикою порівняння та встановлення
- (Експериментально) матеріалізовані представлення

Cassandra свідомо не реалізує операції, що вимагають координації між партиціями, оскільки вони зазвичай є повільними і важкими для забезпечення глобальної доступності. Наприклад, Cassandra не підтримує:

- Транзакції між партиціями
- Розподілені з'єднання
- Зовнішні ключі або референційну цілісність.

## Експлуатація

Налаштування конфігурацій Apache Cassandra здійснюються у файлі `cassandra.yaml`, який можна редагувати вручну або за допомогою інструментів управління конфігураціями. Деякі налаштування можна змінювати в режимі реального часу через онлайн-інтерфейс, однак інші вимагають перезапуску бази даних для вступу змін у дію.

Cassandra надає інструменти для керування кластером. Команда `nodetool` взаємодіє з інтерфейсом управління Cassandra в реальному часі, дозволяючи виконувати маніпуляції з багатьма налаштуваннями з `cassandra.yaml`. `auditlogviewer` використовується для перегляду журналів аудиту, а `fqltool` — для перегляду, відтворення та порівняння повних журналів запитів.

Крім того, Cassandra підтримує вбудовану функціональність знімків даних (atomic snapshot), яка створює моментальний знімок даних Cassandra для легкого інтегрування з багатьма інструментами резервного копіювання. Також підтримуються інкрементні резервні копії, де дані резервуються під час їх запису.