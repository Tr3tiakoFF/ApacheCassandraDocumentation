# Фізична модель даних

Після визначення логічної моделі даних створення фізичної моделі є відносно простим процесом. Фізична модель створюється шляхом проходження кожної таблиці логічної моделі, призначення типів даних та тестування моделі.

## Додавання типів до фізичної моделі
На кожному етапі моделі даних можна призначити відповідні типи даних у CQL, зокрема базові типи, колекції та користувацькі типи (UDT). Додаткові користувацькі типи можна створювати для спрощення дизайну, зокрема для збереження повторюваних даних.

Наприклад, для візуалізації фізичної моделі у ноті Chebotko додаються типи для кожної колонки. Це включає позначення простору ключів, статичних колонок та колонок з вторинними індексами, що є більш актуальними для фізичної моделі.

## Фізична модель даних для готелю

Для зберігання таблиць готелів та даних про наявність створюється простір ключів `hotel`, а для зберігання бронювань та даних про гостей - простір ключів reservation.

У таблиці `hotels` тип `text` використовується для `hotel_id`, а для адреси створюється користувацький тип address. Номер телефону також зберігається як `text`, враховуючи варіації форматів між країнами.

Хоча `uuid` часто є оптимальним для унікальної ідентифікації (наприклад, `hotel_id`), у цьому прикладі ідентифікатори представлені як текст для спрощення. Це дозволяє використовувати загальноприйняті скорочені коди об’єктів, наприклад, "AZ123" або "NY229".

### Переваги унікальних ідентифікаторів

Використання `uuid` може мінімізувати зв’язок між різними типами сутностей, що особливо корисно в архітектурі мікросервісів, де кожна сутність обслуговується окремим сервісом.

Результати цього підходу показані у таблицях, включаючи UDT тип `address`, позначений зірочкою. Такий тип використовується у таблицях `hotels` та `hotels_by_poi`, дозволяючи уникнути дублювання неключових колонок.

*Зверніть увагу, що діапазон UDT обмежується простором ключів, де його визначено. Щоб використовувати `address` в іншому просторі ключів (наприклад, `reservation`), його слід повторно оголосити.*

## Фізична модель даних для бронювання

Логічна модель включала три денормалізовані таблиці для підтримки запитів за номером підтвердження, гостем та датою. У фізичній моделі припускається, що денормалізація буде виконуватися вручну. При необхідності цей дизайн можна переглянути для використання експериментальної функції `materialized views`.

*Гостьовий ідентифікатор `guest_id` у таблицях моделюється як тип `uuid` для уникнення дублювання, а тип `address` знову відтворюється у просторі `reservation`.*

Таким чином, фізична модель створює основу для ефективного зберігання та доступу до даних у Cassandra, враховуючи обмеження та оптимізацію під конкретні запити.
